{% extends "blog/blog.html" %}  
{% load taggingtags %}
{% load markup %}
{% load disqus_tags %}

{% block mainSection %}
    <section id="main-section" class="grid_12">
        <article>
            <section class="entry">
                <h3>{{entry.title}}</h3>
                </br>
                {% if entry.entry_format == 'html' %}
                
                    {{entry.body|safe}}
                
                    {% else %}{% if entry.entry_format == 'md' %}
                
                        {{entry.body|markdown:'codehilite'}}
                        
                    {% endif %}
                {% endif %}
                </br></br>
                by: {{entry.author.username}} on {{entry.pub_date}}
                {% entry_tags entry %}
            </section>
            </br>
            <div class="clear"></div>
            <section class="comments">
                <h2 class="section-title">comments</h2>
                {% if entry.allow_comments %}
                    {% disqus_dev %} <!-- BUG! if devel is enabled then the comments are for all the page not for each article, so we put again disqus_url and disqus_identifier-->
                    {% set_disqus_identifier 'blog_entry_' entry.id%}
                    {% set_disqus_url entry.get_absolute_url %}
                    {% disqus_show_comments %}
                {% else %}
                    <h3>Comments have been closed for this entry.</h3>
                {% endif %}
            </section>
        </article>
    </section>
{% endblock mainSection %}
